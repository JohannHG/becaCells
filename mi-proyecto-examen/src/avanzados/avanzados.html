<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ejercicios Avanzados - Examen JS</title>
  <link rel="stylesheet" href="./css/avanzados.css">
</head>
<body>
  <div class="contenedor">
    <h1>Ejercicios avanzados</h1>

    <!-- EJERCICIO 5 -->
    <section id="ej5" class="ejercicio">
      <div class="col-title"><h2>Ejercicio 5</h2></div>
      <div style="flex:1">
        <p class="desc">Simular un request a un servicio usando Promesas y <code>Promise.race</code>. Si el servicio responde antes de 12s mostrar resultado; si no, mostrar error.</p>

        <div style="display:flex;gap:8px;align-items:center;margin-top:8px;">
          <label style="flex:1">
            Simular respuesta exitosa?
            <select id="srv-flag" style="width:100%;padding:8px;border-radius:6px;border:1px solid var(--borde--color);">
              <option value="true">Sí (respuesta < 12s)</option>
              <option value="false">No (respuesta > 12s, provocará timeout)</option>
            </select>
          </label>

          <label style="width:220px">
            Timeout (seg)
            <input id="srv-timeout" type="number" value="12" min="1" style="width:100%;padding:8px;border-radius:6px;border:1px solid var(--borde--color);">
          </label>

          <button id="srv-run" class="btn">Ejecutar</button>
        </div>

        <p style="margin-top:10px;">Resultado: <strong id="srv-result">—</strong></p>

        <h3 style="margin-top:12px">Pruebas en consola</h3>
        <pre id="srv-tests"></pre>
      </div>
    </section>

    <!-- EJERCICIO 6 -->
    <section id="ej6" class="ejercicio" hidden>
      <div class="col-title"><h2>Ejercicio 6</h2></div>
      <div style="flex:1">
        <p class="desc">Implementar tu propia funcionalidad para generar eventos y escucharlos: <code>myAddEventListener</code> y <code>myDispatchEvent</code>.</p>

        <div style="display:flex;gap:8px;align-items:center;margin-top:8px;">
          <label style="flex:1">
            Nombre del evento
            <input id="evt-name" placeholder="my-event" style="width:100%;padding:8px;border-radius:6px;border:1px solid var(--borde--color);" />
          </label>

          <label style="flex:1">
            Payload (JSON)
            <input id="evt-payload" placeholder='{"name":"Juan","last":"Pérez"}' style="width:100%;padding:8px;border-radius:6px;border:1px solid var(--borde--color);" />
          </label>
        </div>

        <div style="display:flex;gap:8px;margin-top:8px;">
          <button id="evt-add-listener" class="btn">Agregar listener (console)</button>
          <button id="evt-dispatch" class="btn">Dispatch evento</button>
          <button id="evt-clear-log" class="btn" style="background:#999">Limpiar log</button>
        </div>

        <p style="margin-top:10px">Log de eventos (muestra llamadas a handlers):</p>
        <pre id="evt-log" style="height:200px;overflow:auto;"></pre>
      </div>
    </section>

  </div>

  <script src="./js/ejercicio5.js" defer></script>
  <script src="./js/ejercicio6.js" defer></script>
</body>
</html>
